(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,t,n){"use strict";n.d(t,"s",(function(){return u})),n.d(t,"t",(function(){return d})),n.d(t,"G",(function(){return h})),n.d(t,"n",(function(){return g})),n.d(t,"o",(function(){return v})),n.d(t,"m",(function(){return b})),n.d(t,"p",(function(){return E})),n.d(t,"y",(function(){return C})),n.d(t,"i",(function(){return j})),n.d(t,"l",(function(){return _})),n.d(t,"g",(function(){return z})),n.d(t,"a",(function(){return P})),n.d(t,"x",(function(){return M})),n.d(t,"h",(function(){return G})),n.d(t,"B",(function(){return I})),n.d(t,"z",(function(){return F})),n.d(t,"A",(function(){return N})),n.d(t,"E",(function(){return q})),n.d(t,"C",(function(){return U})),n.d(t,"D",(function(){return K})),n.d(t,"e",(function(){return $})),n.d(t,"f",(function(){return Q})),n.d(t,"r",(function(){return ee})),n.d(t,"b",(function(){return ne})),n.d(t,"k",(function(){return re})),n.d(t,"j",(function(){return ie})),n.d(t,"F",(function(){return se})),n.d(t,"H",(function(){return ue})),n.d(t,"c",(function(){return de})),n.d(t,"q",(function(){return he})),n.d(t,"w",(function(){return ge})),n.d(t,"v",(function(){return ve})),n.d(t,"u",(function(){return be})),n.d(t,"d",(function(){return Ee}));var a=n(3),r=n.n(a),c=n(13),i=n.n(c),o=n(23),s=n.n(o),l=(n(543),"https://api.ycycut.com/custom");function u(){return p.apply(this,arguments)}function p(){return(p=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/logoff"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(){return f.apply(this,arguments)}function f(){return(f=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/me"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return m.apply(this,arguments)}function m(){return(m=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_user_infor"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t),credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return y.apply(this,arguments)}function y(){return(y=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/list_drama"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return x.apply(this,arguments)}function x(){return(x=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/list_episodes?did=").concat(t.id),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return w.apply(this,arguments)}function w(){return(w=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/list_cuts?eid=").concat(t.id),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return k.apply(this,arguments)}function k(){return(k=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/list_hot_cuts"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/search_cuts?keywords=").concat(t),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return A.apply(this,arguments)}function A(){return(A=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/get_cuts_by_tag?tid=").concat(t),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return O.apply(this,arguments)}function O(){return(O=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/get_watch_records"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return D.apply(this,arguments)}function D(){return(D=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/get_collect_records"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return L.apply(this,arguments)}function L(){return(L=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/add_collect_record?cid=").concat(t),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(e){return T.apply(this,arguments)}function T(){return(T=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/remove_collect_record?cid=").concat(t),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return R.apply(this,arguments)}function R(){return(R=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/get_cut_detail?vid=").concat(t.id),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e){return B.apply(this,arguments)}function B(){return(B=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_cut_infor"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t),credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e){return H.apply(this,arguments)}function H(){return(H=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_cover_infor"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t),credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return W.apply(this,arguments)}function W(){return(W=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_target_cover?type=cut&target=").concat(t.id,"&cover=").concat(t.cover),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return V.apply(this,arguments)}function V(){return(V=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_target_cover?type=episode&target=").concat(t.id,"&cover=").concat(t.cover),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return J.apply(this,arguments)}function J(){return(J=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_target_cover?type=drama&target=").concat(t.id,"&cover=").concat(t.cover),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(e){return Y.apply(this,arguments)}function Y(){return(Y=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_drama_infor"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t),credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(e){return X.apply(this,arguments)}function X(){return(X=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/create_tag"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t),credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(e){return Z.apply(this,arguments)}function Z(){return(Z=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/delete_tag?tid=").concat(t.id),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return te.apply(this,arguments)}function te(){return(te=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/list_tags"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e,t){return ae.apply(this,arguments)}function ae(){return(ae=i()(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/add_screenshot_to_record?rid=").concat(t),{method:"POST",credentials:"include",body:n});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function re(){return ce.apply(this,arguments)}function ce(){return(ce=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/get_game_records"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(e){return oe.apply(this,arguments)}function oe(){return(oe=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/get_game_rank?order=").concat(t),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(e,t){return le.apply(this,arguments)}function le(){return(le=i()(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_game_record?rid=").concat(t,"&visible=").concat(n),{credentials:"include"});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ue(e,t){return pe.apply(this,arguments)}function pe(){return(pe=i()(r.a.mark((function e(t,n){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/set_user_status?uid=").concat(t,"&status=").concat(n),{credentials:"include"});case 2:return a=e.sent,e.next=5,a.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return fe.apply(this,arguments)}function fe(){return(fe=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/change_avatar"),{method:"POST",credentials:"include",body:t});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return me.apply(this,arguments)}function me(){return(me=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/list_orders"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ge(){return ye.apply(this,arguments)}function ye(){return(ye=i()(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/order_records"),{credentials:"include"});case 2:return t=e.sent,e.next=5,t.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return xe.apply(this,arguments)}function xe(){return(xe=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/new_weixin_order"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t),credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(e){return we.apply(this,arguments)}function we(){return(we=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/new_alipay_order"),{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t),credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return ke.apply(this,arguments)}function ke(){return(ke=i()(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s()("".concat(l,"/close_order?order_id=").concat(t.order_id),{credentials:"include"});case 2:return n=e.sent,e.next=5,n.json();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},235:function(e,t,n){var a=n(511);"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(41)(a,r);a.locals&&(e.exports=a.locals)},320:function(e){e.exports=JSON.parse('{"a":"1.2.0"}')},399:function(e,t,n){"use strict";n.r(t);var a=n(30),r=n.n(a),c=(n(235),n(236),n(514),r()());c.model(n(516).default),c.router(n(770).default),c.start("#root")},450:function(e,t){},511:function(e,t,n){(t=n(40)(!1)).push([e.i,".title-limited{\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 5;\n  overflow: hidden;\n}\n\n.title-limited-2{\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n\n.title-limited-1{\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 1;\n  overflow: hidden;\n}\n\n.grid-item-one{\n  width: 92vw;\n}\n\n.grid-item-two{\n  width: 45vw;\n}\n\n.grid-item-three{\n  width: 30vw;\n}\n\n.grid-item-four{\n  width: 22vw;\n}\n\n.list-item::-webkit-scrollbar {\n  display: none;\n}\n\n.TagLabel {\n  display: inline-block;\n  padding: 0 7px;\n  font-size: 12px;\n  font-weight: 500;\n  line-height: 18px;\n  border: 1px solid transparent;\n  border-radius: 2em;\n}\n",""]),e.exports=t},516:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n.n(a),c=(n(69),n(10)),i=n.n(c),o=n(3),s=n.n(o),l=n(13),u=n.n(l),p=n(18),d=n(149);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){r()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}Object(d.a)("https://cdn.jsdelivr.net/gh/js-deliver/ycycut@1.0.0/dist/icons/fonts/"),t.default={namespace:"util",state:{is_superior:!1,is_admin:!1,user:null,init:!1,loading:!1,drama_list:[],episode_list:[],cut_list:[],cut_list_hot:[],tag_list:[],game_records:[],game_rank:[],watch_record_list:null,collect_record_list:null,current_drama:null,current_episode:null,current_cut:null},subscriptions:{setup:function(e){var t=e.dispatch,n=e.history;n.listen(function(){var e=u()(s.a.mark((function e(a){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t({type:"setCurrent",location:a});case 2:return e.next=4,t({type:"verifyStatus",history:n,location:a});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},effects:{verifyStatus:s.a.mark((function e(t,n){var a,r,c,i,o,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,c=n.select,e.next=4,c((function(e){return e.util.init}));case 4:if(!e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.prev=7,e.next=10,a(p.t);case 10:if(i=e.sent,o=i.success,l=i.register,!o||!l){e.next=26;break}return u=i.data,e.next=16,r({type:"setUser",payload:u});case 16:if("admin"!==u.role){e.next=21;break}return e.next=19,r({type:"setIsAdmin",payload:!0});case 19:e.next=26;break;case 21:if("superior"!==u.role){e.next=26;break}return e.next=24,r({type:"setIsAdmin",payload:!0});case 24:return e.next=26,r({type:"setIsSuperior",payload:!0});case 26:e.next=30;break;case 28:e.prev=28,e.t0=e.catch(7);case 30:return e.next=32,r({type:"setInit",payload:!0});case 32:case"end":return e.stop()}}),e,null,[[7,28]])})),getUser:s.a.mark((function e(t,n){var a,r,c,i,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,n.select,e.prev=2,e.next=5,a(p.t);case 5:if(c=e.sent,i=c.success,o=c.register,!i||!o){e.next=21;break}return l=c.data,e.next=11,r({type:"setUser",payload:l});case 11:if("admin"!==l.role){e.next=16;break}return e.next=14,r({type:"setIsAdmin",payload:!0});case 14:e.next=21;break;case 16:if("superior"!==l.role){e.next=21;break}return e.next=19,r({type:"setIsAdmin",payload:!0});case 19:return e.next=21,r({type:"setIsSuperior",payload:!0});case 21:e.next=25;break;case 23:e.prev=23,e.t0=e.catch(2);case 25:case"end":return e.stop()}}),e,null,[[2,23]])})),setCurrent:s.a.mark((function e(t,n){var a,r,c,o,l,u,d,f,h,m,g,y,v,x,b,w,E,k,C;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.location,r=n.call,c=n.put,o=n.select,l=a.search,!(null!==(u=l.match(/\?id=.*/gi,l))&&u.length>0)){e.next=96;break}if(d=u[0].replace("?id=",""),"/episodes"!==(f=a.pathname)){e.next=36;break}return e.next=10,o((function(e){return e.util.current_drama}));case 10:if(null!==e.sent){e.next=34;break}return h={id:d},e.next=15,c({type:"setLoading",payload:!0});case 15:return e.prev=15,e.next=18,r(p.o,h);case 18:if(m=e.sent,!m.success){e.next=27;break}return e.next=23,c({type:"setEpisodeList",payload:m.data});case 23:return e.next=25,c({type:"setCurrentDrama",payload:m.drama});case 25:e.next=28;break;case 27:i.a.fail(m.msg,2);case 28:e.next=32;break;case 30:e.prev=30,e.t0=e.catch(15);case 32:return e.next=34,c({type:"setLoading",payload:!1});case 34:e.next=96;break;case 36:if("/cuts"!==f){e.next=66;break}return e.next=39,o((function(e){return e.util.current_episode}));case 39:return null===(g=e.sent)&&(g={id:d}),e.next=43,c({type:"setLoading",payload:!0});case 43:return e.prev=43,e.next=46,r(p.m,g);case 46:if(y=e.sent,!y.success){e.next=57;break}return e.next=51,c({type:"setCutList",payload:y.data});case 51:return e.next=53,c({type:"setCurrentEpisode",payload:y.episode});case 53:return e.next=55,c({type:"setCurrentDrama",payload:y.drama});case 55:e.next=58;break;case 57:i.a.fail(y.msg,2);case 58:e.next=62;break;case 60:e.prev=60,e.t1=e.catch(43);case 62:return e.next=64,c({type:"setLoading",payload:!1});case 64:e.next=96;break;case 66:if("/detail"!==f){e.next=96;break}return e.next=69,o((function(e){return e.util.current_cut}));case 69:if(null!==e.sent){e.next=96;break}return v={id:d},e.next=74,c({type:"setLoading",payload:!0});case 74:return e.prev=74,e.next=77,r(p.h,v);case 77:if(x=e.sent,!x.success){e.next=89;break}return e.next=82,c({type:"setCurrentEpisode",payload:x.episode});case 82:return e.next=84,c({type:"setCurrentDrama",payload:x.drama});case 84:return b=x.data,e.next=87,c({type:"setCurrentCut",payload:b});case 87:e.next=90;break;case 89:i.a.fail(x.msg,2);case 90:e.next=94;break;case 92:e.prev=92,e.t2=e.catch(74);case 94:return e.next=96,c({type:"setLoading",payload:!1});case 96:return e.next=98,o((function(e){return e.util.loading}));case 98:if(!e.sent){e.next=101;break}return e.abrupt("return");case 101:if(!(null!==(u=l.match(/\?keywords=.*/gi,l))&&u.length>0)){e.next=129;break}if(w=u[0].replace("?keywords=",""),"/cuts"!==a.pathname){e.next=129;break}return e.next=108,c({type:"setLoading",payload:!0});case 108:return e.prev=108,e.next=111,r(p.y,w);case 111:if(E=e.sent,!E.success){e.next=122;break}return e.next=116,c({type:"setCutList",payload:E.data});case 116:return e.next=118,c({type:"setCurrentEpisode",payload:null});case 118:return e.next=120,c({type:"setCurrentDrama",payload:null});case 120:e.next=123;break;case 122:i.a.fail(E.msg,2);case 123:e.next=127;break;case 125:e.prev=125,e.t3=e.catch(108);case 127:return e.next=129,c({type:"setLoading",payload:!1});case 129:if(!(null!==(u=l.match(/\?tag=.*/gi,l))&&u.length>0)){e.next=157;break}if(k=u[0].replace("?tag=",""),"/cuts"!==a.pathname){e.next=157;break}return e.next=136,c({type:"setLoading",payload:!0});case 136:return e.prev=136,e.next=139,r(p.i,k);case 139:if(C=e.sent,!C.success){e.next=150;break}return e.next=144,c({type:"setCutList",payload:C.data});case 144:return e.next=146,c({type:"setCurrentEpisode",payload:null});case 146:return e.next=148,c({type:"setCurrentDrama",payload:null});case 148:e.next=151;break;case 150:i.a.fail(C.msg,2);case 151:e.next=155;break;case 153:e.prev=153,e.t4=e.catch(136);case 155:return e.next=157,c({type:"setLoading",payload:!1});case 157:case"end":return e.stop()}}),e,null,[[15,30],[43,60],[74,92],[108,125],[136,153]])})),getDramaList:s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,n.select,e.next=4,r({type:"setLoading",payload:!0});case 4:return e.prev=4,e.next=7,a(p.n);case 7:if(c=e.sent,!c.success){e.next=14;break}return e.next=12,r({type:"setDramaList",payload:c.data});case 12:e.next=15;break;case 14:i.a.fail(c.msg,2);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(4);case 19:return e.next=21,r({type:"setLoading",payload:!1});case 21:case"end":return e.stop()}}),e,null,[[4,17]])})),getEpisodeList:s.a.mark((function e(t,n){var a,r,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,c=n.select,e.next=4,c((function(e){return e.util.current_drama}));case 4:if(null!==(o=e.sent)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,r({type:"setLoading",payload:!0});case 9:return e.prev=9,e.next=12,a(p.o,o);case 12:if(l=e.sent,!l.success){e.next=21;break}return e.next=17,r({type:"setEpisodeList",payload:l.data});case 17:return e.next=19,r({type:"setCurrentDrama",payload:l.drama});case 19:e.next=22;break;case 21:i.a.fail(l.msg,2);case 22:e.next=26;break;case 24:e.prev=24,e.t0=e.catch(9);case 26:return e.next=28,r({type:"setLoading",payload:!1});case 28:case"end":return e.stop()}}),e,null,[[9,24]])})),getCutList:s.a.mark((function e(t,n){var a,r,c,o,l;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,c=n.select,e.next=4,c((function(e){return e.util.current_episode}));case 4:if(null!==(o=e.sent)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,r({type:"setLoading",payload:!0});case 9:return e.prev=9,e.next=12,a(p.m,o);case 12:if(l=e.sent,!l.success){e.next=23;break}return e.next=17,r({type:"setCutList",payload:l.data});case 17:return e.next=19,r({type:"setCurrentEpisode",payload:l.episode});case 19:return e.next=21,r({type:"setCurrentDrama",payload:l.drama});case 21:e.next=24;break;case 23:i.a.fail(l.msg,2);case 24:e.next=28;break;case 26:e.prev=26,e.t0=e.catch(9);case 28:return e.next=30,r({type:"setLoading",payload:!1});case 30:case"end":return e.stop()}}),e,null,[[9,26]])})),getCutListHot:s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,n.select,e.next=4,r({type:"setLoading",payload:!0});case 4:return e.prev=4,e.next=7,a(p.p);case 7:if(c=e.sent,!c.success){e.next=14;break}return e.next=12,r({type:"setCutListHot",payload:c.data});case 12:e.next=15;break;case 14:i.a.fail(c.msg,2);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(4);case 19:return e.next=21,r({type:"setLoading",payload:!1});case 21:case"end":return e.stop()}}),e,null,[[4,17]])})),getTagList:s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,n.select,e.next=4,r({type:"setLoading",payload:!0});case 4:return e.prev=4,e.next=7,a(p.r);case 7:if(c=e.sent,!c.success){e.next=14;break}return e.next=12,r({type:"setTagList",payload:c.data});case 12:e.next=15;break;case 14:i.a.fail(c.msg,2);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(4);case 19:return e.next=21,r({type:"setLoading",payload:!1});case 21:case"end":return e.stop()}}),e,null,[[4,17]])})),getCutDetail:s.a.mark((function e(t,n){var a,r,c,o,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,c=n.select,e.next=4,c((function(e){return e.util.current_cut}));case 4:if(null!==(o=e.sent)){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,r({type:"setLoading",payload:!0});case 9:return e.prev=9,e.next=12,a(p.h,o);case 12:if(l=e.sent,!l.success){e.next=20;break}return u=l.data,e.next=18,r({type:"setCurrentCut",payload:u});case 18:e.next=21;break;case 20:i.a.fail(l.msg,2);case 21:e.next=25;break;case 23:e.prev=23,e.t0=e.catch(9);case 25:return e.next=27,r({type:"setLoading",payload:!1});case 27:case"end":return e.stop()}}),e,null,[[9,23]])})),getWatchRecordList:s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,n.select,e.next=4,r({type:"setLoading",payload:!0});case 4:return e.prev=4,e.next=7,a(p.l);case 7:if(c=e.sent,!c.success){e.next=14;break}return e.next=12,r({type:"setWatchRecordList",payload:c.data});case 12:e.next=15;break;case 14:i.a.fail(c.msg,2);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(4);case 19:return e.next=21,r({type:"setLoading",payload:!1});case 21:case"end":return e.stop()}}),e,null,[[4,17]])})),getCollectRecordList:s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,n.select,e.next=4,r({type:"setLoading",payload:!0});case 4:return e.prev=4,e.next=7,a(p.g);case 7:if(c=e.sent,!c.success){e.next=14;break}return e.next=12,r({type:"setCollectRecordList",payload:c.data});case 12:e.next=15;break;case 14:i.a.fail(c.msg,2);case 15:e.next=19;break;case 17:e.prev=17,e.t0=e.catch(4);case 19:return e.next=21,r({type:"setLoading",payload:!1});case 21:case"end":return e.stop()}}),e,null,[[4,17]])})),getGameRecords:s.a.mark((function e(t,n){var a,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.history,t.location,a=n.call,r=n.put,n.select,e.next=4,r({type:"setLoading",payload:!0});case 4:return e.prev=4,e.next=7,a(p.k);case 7:if(c=e.sent,!c.success){e.next=12;break}return e.next=12,r({type:"setGameRecords",payload:c.data});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(4);case 16:return e.next=18,r({type:"setLoading",payload:!1});case 18:case"end":return e.stop()}}),e,null,[[4,14]])})),getGameRank:s.a.mark((function e(t,n){var a,r,c,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.payload,r=n.call,c=n.put,n.select,e.next=4,c({type:"setLoading",payload:!0});case 4:return e.prev=4,e.next=7,r(p.j,a.mode);case 7:if(i=e.sent,!i.success){e.next=12;break}return e.next=12,c({type:"setGameRank",payload:i.data});case 12:e.next=16;break;case 14:e.prev=14,e.t0=e.catch(4);case 16:return e.next=18,c({type:"setLoading",payload:!1});case 18:case"end":return e.stop()}}),e,null,[[4,14]])}))},reducers:{setIsSuperior:function(e,t){return h(h({},e),{},{is_superior:t.payload})},setIsAdmin:function(e,t){return h(h({},e),{},{is_admin:t.payload})},setUser:function(e,t){return h(h({},e),{},{user:t.payload})},setInit:function(e,t){return h(h({},e),{},{init:t.payload})},setLoading:function(e,t){return h(h({},e),{},{loading:t.payload})},setDramaList:function(e,t){return h(h({},e),{},{drama_list:t.payload})},setCutListHot:function(e,t){return h(h({},e),{},{cut_list_hot:t.payload})},setEpisodeList:function(e,t){return h(h({},e),{},{episode_list:t.payload})},setWatchRecordList:function(e,t){return h(h({},e),{},{watch_record_list:t.payload})},setCollectRecordList:function(e,t){return h(h({},e),{},{collect_record_list:t.payload})},setCutList:function(e,t){return h(h({},e),{},{cut_list:t.payload})},setTagList:function(e,t){return h(h({},e),{},{tag_list:t.payload})},setCurrentDrama:function(e,t){return h(h({},e),{},{current_drama:t.payload})},setCurrentEpisode:function(e,t){return h(h({},e),{},{current_episode:t.payload})},setCurrentCut:function(e,t){return h(h({},e),{},{current_cut:t.payload})},setGameRecords:function(e,t){return h(h({},e),{},{game_records:t.payload})},setGameRank:function(e,t){return h(h({},e),{},{game_rank:t.payload})}}}},543:function(e){e.exports=JSON.parse("{}")},770:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(59),o=n(49),s=n.n(o),l=n(50),u=n.n(l),p=n(21),d=n.n(p),f=n(51),h=n.n(f),m=n(52),g=n.n(m),y=n(34),v=n.n(y),x=n(20),b=n.n(x),w=n(30),E=n(837),k=n(18);function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var S=Object(w.connect)((function(e){return{util:e.util}}))(a=function(e){h()(n,e);var t=C(n);function n(){var e;s()(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return e=t.call.apply(t,[this].concat(r)),b()(d()(e),"state",{value:""}),e}return u()(n,[{key:"render",value:function(){this.state.value;return c.a.createElement(E.a,{style:{minHeight:"40vh"},tokens:{childrenGap:15},horizontal:!0,horizontalAlign:"center",verticalAlign:"end"})}}]),n}(r.PureComponent))||a,j=(n(69),n(10)),A=n.n(j),_=n(3),O=n.n(_),z=n(13),D=n.n(z),P=(n(546),n(80)),L=n(829),M=n(81),T=n(844),G=n(839),R=n(845),I=n(151),B=n(319),F=n(827),H=n(834),N=n(830),W=n(331),q=n(825),V=n(840),U=n(846),J=n(146),K=n(321),Y=n(847),$=n(22),X=n(848),Q=n(849),Z=n(836),ee=n(857),te=n(25),ne=n(858),ae=n(841),re=n(850),ce=n(851),ie=n(843),oe=n(859),se=n(860),le=n(150),ue=n(117);function pe(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw c}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function fe(){for(var e=navigator.userAgent,t=["Android","iPhone"],n=!0,a=0;a<t.length;a++)if(e.indexOf(t[a])>0){n=!1;break}return n}function he(e){var t=new Date(e);return t.toLocaleString().replace(/:\d{1,2}$/," "),function(e,t){var n,a={"Y+":t.getFullYear().toString(),"m+":(t.getMonth()+1).toString(),"d+":t.getDate().toString(),"H+":t.getHours().toString(),"M+":t.getMinutes().toString(),"S+":t.getSeconds().toString()};for(var r in a)(n=new RegExp("("+r+")").exec(e))&&(e=e.replace(n[1],1===n[1].length?a[r]:a[r].padStart(n[1].length,"0")));return e}("Y年mm月dd日",t)}function me(e){return 9.8+14*e.length}function ge(e){var t,n=[],a=e.did,r=pe(e.covers);try{for(r.s();!(t=r.n()).done;){var c=t.value,i={src:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(a,"/").concat(c.id,".jpg")};n.push(i)}}catch(e){r.e(e)}finally{r.f()}return n}var ye,ve=n(12),xe=Object(ve.v)(),be=[{id:"a",label:"red",color:"#a4262c"},{id:"b",label:"orange",color:"#ca5010"},{id:"c",label:"yellowGreen",color:"#8cbd18"},{id:"d",label:"green",color:"#0b6a0b"},{id:"e",label:"cyanBlue",color:"#004e8c"},{id:"f",label:"magenta",color:"#881798"},{id:"g",label:"magentaPink",color:"#9b0062"},{id:"h",label:"gray",color:"#7a7574"}],we=Object(ve.m)({fonts:{medium:{fontFamily:"Monaco, Menlo, Consolas",fontSize:"16px"}}}),Ee=Object(ve.y)({callout:{maxWidth:"50vw"},header:{padding:"18px 24px 12px"},title:[xe.fonts.medium,{margin:0,fontWeight:ve.c.bold}],inner:{height:"100%",width:"50vw",maxWidth:"500px",padding:"0 24px 20px"},body:{flex:"4 4 auto",padding:"0 24px 24px 24px",overflowY:"hidden",selectors:{p:{margin:"14px 0"},"p:first-child":{marginTop:0},"p:last-child":{marginBottom:0}}},subtext:[xe.fonts.smallPlus,{margin:0,fontWeight:ve.c.semilight}],actions:{position:"relative",marginTop:20,width:"100%",whiteSpace:"nowrap"}}),ke={months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],shortMonths:["一","二","三","四","五","六","七","八","九","十","十一","十二"],days:["周日","周一","周二","周三","周四","周五","周六"],shortDays:["日","一","二","三","四","五","六"],prevMonthAriaLabel:"上个月",nextMonthAriaLabel:"下个月",prevYearAriaLabel:"前一年",nextYearAriaLabel:"后一年",closeButtonAriaLabel:"关闭",monthPickerHeaderAriaLabel:"{0}, 选择以改变年份",yearPickerHeaderAriaLabel:"{0}, 选择以改变月份"},Ce=[{key:"teleplay",text:"影视  "},{key:"variety",text:"综艺  "},{key:"bussiness",text:"商务  "},{key:"performance",text:"舞台  "},{key:"short",text:"短视频  "}],Se=c.a.createElement("svg",{t:"1602151188282",className:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1416",width:"30",height:"30"},c.a.createElement("path",{d:"M511.037 986.94c-85.502 0-163.986-26.686-214.517-66.544-25.66 7.149-58.486 18.655-79.202 32.921-17.725 12.202-15.516 24.647-12.32 29.67 14.027 22.069 240.622 14.092 306.04 7.219v-3.265z",fill:"#FAAD08","p-id":"1417"}),c.a.createElement("path",{d:"M495.627 986.94c85.501 0 163.986-26.686 214.518-66.544 25.66 7.149 58.485 18.655 79.203 32.921 17.724 12.202 15.512 24.647 12.32 29.67-14.027 22.069-240.623 14.092-306.042 7.219v-3.265z",fill:"#FAAD08","p-id":"1418"}),c.a.createElement("path",{d:"M496.137 472.026c140.73-0.935 253.514-27.502 291.73-37.696 9.11-2.432 13.984-6.789 13.984-6.789 0.032-1.25 0.578-22.348 0.578-33.232 0-183.287-88.695-367.458-306.812-367.47C277.5 26.851 188.8 211.021 188.8 394.31c0 10.884 0.55 31.982 0.583 33.232 0 0 3.965 4.076 11.231 6.048 35.283 9.579 150.19 37.482 294.485 38.437h1.037zM883.501 626.967c-8.66-27.825-20.484-60.273-32.455-91.434 0 0-6.886-0.848-10.366 0.158-107.424 31.152-237.624 51.006-336.845 49.808h-1.026c-98.664 1.186-227.982-18.44-335.044-49.288-4.09-1.176-12.168-0.677-12.168-0.677-11.97 31.16-23.793 63.608-32.453 91.433-41.3 132.679-27.92 187.587-17.731 188.818 21.862 2.638 85.099-99.88 85.099-99.88 0 104.17 94.212 264.125 309.947 265.596a765.877 765.877 0 0 1 5.725 0c215.738-1.471 309.947-161.424 309.947-265.595 0 0 63.236 102.519 85.102 99.88 10.186-1.231 23.566-56.14-17.732-188.819","p-id":"1419"}),c.a.createElement("path",{d:"M429.208 303.911c-29.76 1.323-55.195-32.113-56.79-74.62-1.618-42.535 21.183-78.087 50.95-79.417 29.732-1.305 55.149 32.116 56.765 74.64 1.629 42.535-21.177 78.08-50.925 79.397m220.448-74.62c-1.593 42.507-27.03 75.941-56.79 74.62-29.746-1.32-52.553-36.862-50.924-79.397 1.614-42.526 27.03-75.948 56.764-74.639 29.77 1.33 52.57 36.881 50.951 79.417",fill:"#FFFFFF","p-id":"1420"}),c.a.createElement("path",{d:"M695.405 359.069c-7.81-18.783-86.466-39.709-183.843-39.709h-1.045c-97.376 0-176.033 20.926-183.842 39.709a6.66 6.66 0 0 0-0.57 2.672c0 1.353 0.418 2.575 1.072 3.612 6.58 10.416 93.924 61.885 183.341 61.885h1.045c89.416 0 176.758-51.466 183.34-61.883a6.775 6.775 0 0 0 1.069-3.622 6.66 6.66 0 0 0-0.567-2.664",fill:"#FAAD08","p-id":"1421"}),c.a.createElement("path",{d:"M464.674 239.335c1.344 16.946-7.87 32-20.55 33.645-12.701 1.647-24.074-10.755-25.426-27.71-1.326-16.954 7.873-32.008 20.534-33.64 12.722-1.652 24.114 10.76 25.442 27.705m77.97 8.464c2.702-4.392 21.149-27.488 59.328-19.078 10.028 2.208 14.667 5.457 15.646 6.737 1.445 1.888 1.84 4.576 0.375 8.196-2.903 7.174-8.894 6.979-12.217 5.575-2.144-0.907-28.736-16.948-53.232 6.99-1.685 1.648-4.7 2.212-7.558 0.258-2.856-1.956-4.038-5.923-2.342-8.678","p-id":"1422"}),c.a.createElement("path",{d:"M503.821 589.328h-1.031c-67.806 0.802-150.022-8.004-229.638-23.381-6.817 38.68-10.934 87.294-7.399 145.275 8.928 146.543 97.728 238.652 234.793 239.996h5.57c137.065-1.344 225.865-93.453 234.796-239.996 3.535-57.986-0.584-106.6-7.403-145.283-79.631 15.385-161.861 24.196-229.688 23.389",fill:"#FFFFFF","p-id":"1423"}),c.a.createElement("path",{d:"M310.693 581.35v146.633s69.287 13.552 138.7 4.17V596.897c-43.974-2.413-91.4-7.79-138.7-15.546",fill:"#EB1C26","p-id":"1424"}),c.a.createElement("path",{d:"M806.504 427.238s-130.112 43.08-302.66 44.309h-1.025c-172.264-1.224-302.217-44.161-302.66-44.309L156.58 541.321c108.998 34.464 244.093 56.677 346.238 55.387l1.024-0.002c102.152 1.297 237.226-20.917 346.24-55.385l-43.579-114.083z",fill:"#EB1C26","p-id":"1425"})),je=c.a.createElement("svg",{t:"1602253669887",className:"icon",viewBox:"0 0 1026 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"1562",width:"30",height:"30"},c.a.createElement("defs",null,c.a.createElement("style",{type:"text/css"})),c.a.createElement("path",{d:"M1012.49 451.553v0.159c-6.697 20.66-28.861 31.99-49.449 25.288a39.352 39.352 0 0 1-25.287-49.582l-0.067-0.031c20.536-63.6 7.516-136.156-40.315-189.363-47.892-53.212-118.502-73.554-183.731-59.659-21.222 4.537-42.133-9.047-46.638-30.3-4.506-21.253 9.021-42.194 30.239-46.73 91.709-19.563 191.114 8.98 258.467 83.881 67.36 74.839 85.515 176.85 56.781 266.337z",fill:"#D32024","p-id":"1563"}),c.a.createElement("path",{d:"M740.429 304.348v-0.03c-18.217 3.973-36.178-7.732-40.06-26.01-3.947-18.31 7.763-36.373 25.98-40.254 44.692-9.548 93.143 4.322 125.885 40.781 32.866 36.496 41.631 86.17 27.607 129.772a33.833 33.833 0 0 1-42.562 21.847c-17.782-5.76-27.484-24.914-21.724-42.69h-0.062c6.887-21.346 2.565-45.635-13.46-63.473-16.026-17.818-39.752-24.546-61.604-19.943z m30.05 192.184c-14.46-4.352-24.352-7.326-16.774-26.352 16.333-41.313 18.027-76.964 0.317-102.385-33.31-47.734-124.451-45.133-228.838-1.28 0-0.061-32.799 14.367-24.412-11.704 16.056-51.774 13.645-95.186-11.361-120.192-56.658-56.878-207.304 2.12-336.477 131.64C56.187 463.32 0 566.14 0 655.1 0 825.18 217.503 928.594 430.28 928.594c278.917 0 464.527-162.504 464.527-291.59 0-77.936-65.546-122.193-124.329-140.472zM430.842 867.62c-169.774 16.84-316.35-60.155-327.368-171.96-11.049-111.74 117.72-216.034 287.488-232.873 169.805-16.84 316.355 60.16 327.368 171.904 11.018 111.866-117.683 216.09-287.488 232.929z",fill:"#D32024","p-id":"1564"}),c.a.createElement("path",{d:"M447.805 548.859c-80.783-21.09-172.119 19.287-207.206 90.65-35.743 72.862-1.188 153.681 80.44 180.1 84.578 27.357 184.233-14.525 218.88-93.148 34.181-76.81-8.478-155.94-92.114-177.602zM386.12 734.792c-16.43 26.29-51.584 37.806-78.065 25.661-26.107-11.889-33.833-42.44-17.403-68.045 16.215-25.538 50.207-36.869 76.498-25.856 26.604 11.392 35.087 41.687 18.97 68.24z",fill:"#D32024","p-id":"1565"})),Ae=(n(271),n(143)),_e=n.n(Ae),Oe=n(31),ze=n.n(Oe),De=function(e){var t=e.state,n=e.dispatch,a=e.util,i=e.wide,o=a.is_admin,s=a.is_superior,l=a.user,u=Object(r.useState)(!1),p=ze()(u,2),d=p[0],f=p[1],h=Object(r.useState)(""),m=ze()(h,2),g=m[0],y=m[1],v=Object(r.useState)(""),x=ze()(v,2),b=x[0],w=x[1],C=Object(r.useState)(!1),S=ze()(C,2),j=S[0],_=S[1],z=Object(r.useState)([]),P=ze()(z,2),T=P[0],R=P[1],F="game"===t?"qq_game":"qq",H="game"===t?"weibo_game":"weibo";function N(e){return V.apply(this,arguments)}function V(){return(V=D()(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t[0].file),e.next=4,Object(k.c)(n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return J.apply(this,arguments)}function J(){return(J=D()(O.a.mark((function e(){var t,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t={name:b},""===b){e.next=6;break}return e.next=4,Object(k.G)(t);case 4:(a=e.sent).success?(A.a.success("昵称已修改",1.5),n({type:"util/getUser",payload:{}})):A.a.fail(a.msg,1.5);case 6:f(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){null===l?y(""):(y(l.name),w(l.name))}),[l]),c.a.createElement("div",null,d&&c.a.createElement(L.a,{hidden:!d,onDismiss:function(){f(!1)},dialogContentProps:{type:M.a.normal,title:"账号设置"}},c.a.createElement(B.a,{iconProps:{iconName:"UserRemove"},allowDisabledFocus:!0,onClick:D()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.s)();case 2:e.sent.success&&(A.a.success("已注销",2),window.location.reload());case 4:case"end":return e.stop()}}),e)})))},"退出我的账号"),c.a.createElement(E.a,{tokens:{childrenGap:5}},c.a.createElement(G.a,{style:{width:"100%",fontSize:10},label:"UID",readOnly:!0,defaultValue:l.id}),c.a.createElement(G.a,{style:{width:"100%"},label:"昵称",defaultValue:l.name,onChange:function(e,t){w(t)}}),c.a.createElement(ie.a,{variant:"medium",style:{fontWeight:"bold",marginTop:5}},"头像"),c.a.createElement(E.a,{style:{width:200}},c.a.createElement(_e.a,{files:T,length:2,onChange:function(e,t,n){if("add"===t){var a=e[e.length-1];a.file.size/1024/1024>=5.9?A.a.fail("图片大小不能超过6M"):(R([a]),_(!0))}},accept:"image/jpeg,image/jpg,image/png",disableDelete:!0}))),j&&c.a.createElement(q.a,{onClick:D()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(T);case 2:e.sent.success&&(A.a.success("上传成功"),n({type:"util/getUser",payload:{}}),_(!1)),f(!1);case 5:case"end":return e.stop()}}),e)})))},"上传"),c.a.createElement(W.a,null,g!==b&&c.a.createElement(q.a,{onClick:D()(O.a.mark((function e(){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U();case 2:case"end":return e.stop()}}),e)}))),text:"修改"}),c.a.createElement(I.a,{onClick:function(){f(!1)},text:"关闭"}))),c.a.createElement(E.a,{horizontalAlign:"center"},null===l&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:3},tokens:{childrenGap:5},onClick:function(){window.location.href="https://graph.qq.com/oauth2.0/authorize?response_type=code&client_id=101909582&redirect_uri=https://api.ycycut.com/custom/oauth&state=".concat(F)}},Se,c.a.createElement(ie.a,{style:{width:120},variant:"large"},"使用QQ登录")),null===l&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:3},tokens:{childrenGap:5},onClick:function(){window.location.href="https://api.weibo.com/oauth2/authorize?client_id=3764231774&response_type=code&redirect_uri=https://api.ycycut.com/custom/oauth&state=".concat(H)}},je,c.a.createElement(ie.a,{style:{width:120},variant:"large"},"使用微博登录")),null!==l&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:"5px",padding:"5px",width:"95vw",maxWidth:i?"100%":"calc(400px * 0.95)",boxShadow:"4px 4px 10px rgba(0, 0, 0, 0.2)"},tokens:{childrenGap:5}},c.a.createElement(le.a,{width:85,height:85,imageFit:te.b.centerCover,src:l.avatar}),c.a.createElement(E.a,{tokens:{childrenGap:5},styles:{root:{height:80}}},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:10}},c.a.createElement(ie.a,{variant:"large"},l.name),s&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:"5px",padding:"3px"},tokens:{childrenGap:10}},c.a.createElement(ae.a,{style:{fontSize:16},iconName:"Permissions"})),!s&&o&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:"5px",padding:"3px"},tokens:{childrenGap:10}},c.a.createElement(ae.a,{style:{fontSize:16},iconName:"Signin"})),!o&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:"5px",padding:"3px"},tokens:{childrenGap:10}},c.a.createElement(ae.a,{style:{fontSize:16},iconName:"VerifiedBrand"}))),c.a.createElement(E.a,{style:{width:200}},c.a.createElement(B.a,{iconProps:{iconName:"settings"},allowDisabledFocus:!0,onClick:function(){f(!0),R([{url:l.avatar}]),_(!1)}},"账号设置"))))))},Pe=n(320);function Le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Le(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Te(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ge(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ge(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw c}}}}function Ge(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var Ie,Be=Object(w.connect)((function(e){return{util:e.util}}))(ye=function(e){h()(n,e);var t=Re(n);function n(e){var a;return s()(this,n),a=t.call(this,e),b()(d()(a),"initData",(function(){var e=a.props.dispatch;e({type:"util/getDramaList",payload:{}}),e({type:"util/getTagList",payload:{}})})),b()(d()(a),"viewDrama",function(){var e=D()(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.dispatch,c=n.history,r({type:"util/setCurrentDrama",payload:t}),c.push("/episodes?id=".concat(t.id));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"viewCut",function(){var e=D()(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.dispatch,c=n.history,r({type:"util/setCurrentCut",payload:t}),r({type:"util/setCurrentDrama",payload:null}),r({type:"util/setCurrentEpisode",payload:null}),c.push("/detail?id=".concat(t.id));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"onSearch",function(){var e=D()(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==t.replace(" ","")){e.next=3;break}return A.a.fail("不合法的关键词",2),e.abrupt("return");case 3:a.props.history.push("/cuts?keywords=".concat(t));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"hideDialog",(function(){a.setState({showModal:!1})})),b()(d()(a),"getDialogTitle",(function(){var e=a.state.modalType;return"cut"===e?"素材管理":"drama"===e?"合集管理":"tag"===e?"标签管理":"user"===e?"个人信息":void 0})),b()(d()(a),"confirmDialog",D()(O.a.mark((function e(){var t,n,r,c,i,o,s,l,u,p,d;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props.dispatch,n=a.state,r=n.currentCut,c=n.currentDrama,i=n.currentTag,o=n.currentUser,"cut"!==(s=n.modalType)){e.next=15;break}return e.prev=3,e.next=6,Object(k.B)(r);case 6:(l=e.sent).success?A.a.success("修改成功",2):A.a.fail(l.msg,2),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),A.a.fail(e.t0,2);case 13:e.next=52;break;case 15:if("drama"!==s){e.next=28;break}return e.prev=16,e.next=19,Object(k.D)(c);case 19:(u=e.sent).success?A.a.success("修改成功",2):A.a.fail(u.msg,2),e.next=26;break;case 23:e.prev=23,e.t1=e.catch(16),A.a.fail(e.t1,2);case 26:e.next=52;break;case 28:if("tag"!==s){e.next=41;break}return e.prev=29,e.next=32,Object(k.e)(i);case 32:(p=e.sent).success?(t({type:"util/getTagList",payload:{}}),A.a.success("操作成功",2)):A.a.fail(p.msg,2),e.next=39;break;case 36:e.prev=36,e.t2=e.catch(29),A.a.fail(e.t2,2);case 39:e.next=52;break;case 41:if("user"!==s){e.next=52;break}return e.prev=42,e.next=45,Object(k.G)(o);case 45:(d=e.sent).success?A.a.success("操作成功",2):A.a.fail(d.msg,2),e.next=52;break;case 49:e.prev=49,e.t3=e.catch(42),A.a.fail(e.t3,2);case 52:a.setState({showModal:!1});case 53:case"end":return e.stop()}}),e,null,[[3,10],[16,23],[29,36],[42,49]])})))),b()(d()(a),"deleteTag",D()(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.dispatch,n=a.state.currentTag,e.prev=2,e.next=5,Object(k.f)(n);case 5:(r=e.sent).success?(t({type:"util/getTagList",payload:{}}),A.a.success("操作成功",2)):A.a.fail(r.msg,2),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),A.a.fail(e.t0,2);case 12:a.setState({showModal:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))),b()(d()(a),"viewTag",(function(e){var t=a.props,n=t.util,r=t.history;n.is_admin?a.setState({showModal:!0,isOldTag:!0,currentTag:e,modalType:"tag"}):r.push("/cuts?tag=".concat(e.id))})),b()(d()(a),"onPivotLinkClick",(function(e){var t=a.props,n=t.dispatch,r=t.util,c=e.props.itemKey;if("user"===c){var i=r.user;n({type:"util/getWatchRecordList",payload:{}}),null!==i&&n({type:"util/getCollectRecordList",payload:{}})}else"hot"===c&&n({type:"util/getCutListHot",payload:{}})})),a.state={showModal:!1,isOldTag:!1,modalType:"cut",currentCut:null,currentDrama:null,currentTag:null,currentUser:null},a}return u()(n,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.util,r=n.dispatch,i=a.init,o=a.loading,s=a.is_admin,l=(a.is_superior,a.user),u=a.drama_list,p=a.cut_list_hot,d=a.tag_list,f=a.watch_record_list,h=a.collect_record_list,m=this.state,g=m.showModal,y=m.isOldTag,v=m.currentCut,x=m.currentDrama,b=m.currentTag,w=m.currentUser,k=m.modalType,C=fe(),S={},j=Te(be);try{for(j.s();!(e=j.n()).done;){var A=e.value;S[A.id]=A.color}}catch(e){j.e(e)}finally{j.f()}var _=new Set;if(null!==v){var O,z=Te(v.tags);try{for(z.s();!(O=z.n()).done;){var D=O.value;_.add(D.id)}}catch(e){z.e(e)}finally{z.f()}}return null===w&&null!==l&&this.setState({currentUser:l}),c.a.createElement("div",{style:{background:"white"}},g&&c.a.createElement(L.a,{hidden:!g,onDismiss:function(){t.hideDialog()},dialogContentProps:{type:M.a.normal,title:this.getDialogTitle()}},"cut"===k&&c.a.createElement("div",null,c.a.createElement(T.a,{label:"状态",defaultChecked:v.visible,onText:"可见",offText:"隐藏",onChange:function(e,n){v.visible=n,t.setState({currentCut:v})}}),c.a.createElement(G.a,{style:{width:"100%"},label:"标题",multiline:!0,autoAdjustHeight:!0,defaultValue:v.title,onChange:function(e,n){v.title=n,t.setState({currentCut:v})}}),c.a.createElement(G.a,{style:{width:"100%"},label:"简介",multiline:!0,autoAdjustHeight:!0,defaultValue:v.description,onChange:function(e,n){v.description=n,t.setState({currentCut:v})}}),c.a.createElement(E.a,{style:{margin:"3px"},horizontal:!0,horizontalAlign:"start",wrap:!0},d.map((function(e,n){return c.a.createElement(E.a,{style:{width:15+(a=e.name,a.length<4?60:4===a.length?75:5===a.length?90:6===a.length?105:120),margin:2}},c.a.createElement(R.a,{style:{textAlign:"start"},label:e.name,defaultChecked:_.has(e.id),onChange:function(n,a){if(a)v.tags.push(e);else for(var r=v.tags,c=0;c<r.length;c+=1){if(r[c].id===e.id){r.splice(c,1);break}}t.setState({currentCut:v})}}));var a})))),"tag"===k&&c.a.createElement("div",null,y&&c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"space-around",verticalAlign:"center",style:{margin:"5px",padding:"3px"},tokens:{childrenGap:10}},c.a.createElement(I.a,{onClick:function(){t.props.history.push("/cuts?tag=".concat(b.id))}},"查看"),c.a.createElement(B.a,{iconProps:{iconName:"Delete"},allowDisabledFocus:!0,onClick:function(){t.deleteTag()}},"删除")),c.a.createElement(T.a,{label:"状态",defaultChecked:b.visible,onText:"可见",offText:"隐藏",onChange:function(e,n){b.visible=n,t.setState({currentTag:b})}}),c.a.createElement(G.a,{style:{width:"100%",color:S[b.color]},label:"名称",defaultValue:b.name,onChange:function(e,n){b.name=n,t.setState({currentTag:b})}}),c.a.createElement(F.a,{columnCount:8,cellShape:"square",cellHeight:20,cellWidth:20,colorCells:be,isControlled:!0,onColorChanged:function(e,n){b.color=e,t.setState({currentTag:Me({},b)})}}),c.a.createElement(G.a,{style:{width:"100%"},label:"简介",multiline:!0,autoAdjustHeight:!0,defaultValue:b.description,onChange:function(e,n){b.description=n,t.setState({currentTag:b})}})),"drama"===k&&c.a.createElement("div",null,c.a.createElement(T.a,{label:"状态",defaultChecked:x.visible,onText:"可见",offText:"隐藏",onChange:function(e,n){x.visible=n,t.setState({currentDrama:x})}}),c.a.createElement(H.a,{label:"类型",styles:{flexContainer:{display:"flex",flexWrap:"wrap"}},defaultSelectedKey:x.type,options:Ce,onChange:function(e,n){x.type=n.key,t.setState({currentDrama:x})}}),c.a.createElement(N.a,{strings:ke,style:{marginTop:10},value:new Date(x.date),formatDate:function(e){return"播出日期:".concat(e.getFullYear(),"年").concat(e.getMonth()+1,"月").concat(e.getDate(),"日")},placeholder:"选择日期",ariaLabel:"选择日期",onSelectDate:function(e){x.date=e.valueOf(),t.setState({currentDrama:x})}}),c.a.createElement(G.a,{style:{width:"100%"},label:"标题",defaultValue:x.name,onChange:function(e,n){x.name=n,t.setState({currentDrama:x})}}),c.a.createElement(G.a,{style:{width:"100%"},label:"简介",multiline:!0,autoAdjustHeight:!0,defaultValue:x.description,onChange:function(e,n){x.description=n,t.setState({currentDrama:x})}})),c.a.createElement(W.a,null,c.a.createElement(q.a,{onClick:function(){t.confirmDialog()},text:"确定"}),c.a.createElement(I.a,{onClick:function(){t.hideDialog()},text:"取消"}))),(!i||o)&&c.a.createElement(E.a,{style:{margin:10},horizontal:!1,verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."})),c.a.createElement(U.a,{style:{margin:"3px"},linkFormat:J.a.tabs,onLinkClick:function(e){t.onPivotLinkClick(e)}},c.a.createElement(K.a,{itemKey:"collection",headerText:"合集",itemIcon:"PageList"},c.a.createElement(Y.a,{messageBarType:$.a.success},c.a.createElement(X.a,{onClick:function(){window.location="/#/orders"}},"点击此处"),"查看捐赠鸣谢名单"),c.a.createElement(E.a,{style:{paddingTop:5,paddingBottom:5,paddingLeft:50,paddingRight:50}},c.a.createElement(Q.a,{placeholder:"素材搜索",onSearch:function(e){t.onSearch(e)}})),c.a.createElement(E.a,{verticalAlign:"space-around",tokens:{childrenGap:10}},0===u.length&&c.a.createElement("div",{style:{height:"calc(100vh - 164px)"}}),c.a.createElement(E.a,{horizontalAlign:"center"},c.a.createElement(E.a,{horizontalAlign:"space-around",verticalAlign:"center",tokens:{childrenGap:10}},0!==u.length&&c.a.createElement(E.a,{horizontalAlign:"center",horizontal:!0,wrap:!0,tokens:{childrenGap:5}},u.map((function(e,n){return c.a.createElement(Z.a,{styles:{root:{minWidth:150,maxWidth:"98vw"}}},c.a.createElement("div",{className:C?"grid-item-four":"grid-item-two",style:{overflowX:"hidden"}},c.a.createElement("div",{onClick:function(){t.viewDrama(e)}},c.a.createElement(ee.a,{previewImages:[{previewImageSrc:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(e.id,"/").concat(e.cover,".jpg?imageMogr2/thumbnail/x250/interlace/0"),imageFit:te.b.centerCover,height:C?200:120}]})),c.a.createElement("div",{onClick:function(){s&&t.setState({showModal:!0,currentDrama:e,modalType:"drama"})}},c.a.createElement(E.a,{horizontal:!0},c.a.createElement(ne.a,{styles:{root:{display:"flex",alignItems:"center",padding:3,height:20,lineHeight:18,fontWeight:600,fontSize:18}},title:e.name}),void 0!==e.visible&&!1===e.visible&&c.a.createElement(E.a,{horizontalAlign:"center",verticalAlign:"center"},c.a.createElement(ae.a,{iconName:"Hide"}))),c.a.createElement(E.a,{horizontal:!0,verticalAlign:"end"},c.a.createElement(ne.a,{styles:{root:{display:"flex",alignItems:"center",padding:3,margin:3,height:18,lineHeight:16,fontSize:12}},title:he(e.date),showAsSecondaryTitle:!0})))))}))))),!o&&c.a.createElement(re.a,{theme:we},"已经到底了"),c.a.createElement(ue.Footer,null,c.a.createElement(ue.FooterText,null,"v".concat(Pe.a)),c.a.createElement(ue.FooterLink,{href:"http://www.beian.miit.gov.cn"},"沪ICP备17026136号"),c.a.createElement(ue.FooterLink,{href:"https://webify.cloudbase.net"},"Powered by CloudBase Webify")))),c.a.createElement(K.a,{itemKey:"hot",headerText:"热门",itemIcon:"LineChart",style:{height:"calc(100vh - 47px)",overflow:"auto"}},c.a.createElement(re.a,{theme:we},"本周热门"),c.a.createElement(E.a,{horizontalAlign:"center",horizontal:!0,wrap:!0,style:{margin:"5px",padding:"3px"},tokens:{childrenGap:10}},p.map((function(e,n){var a=void 0!==e.visible&&!1===e.visible;return c.a.createElement(Z.a,{styles:{root:{maxWidth:"98vw"}}},c.a.createElement("div",{className:C?"grid-item-four":"grid-item-one",style:{overflow:"hidden"}},c.a.createElement("div",{onClick:function(){t.viewCut(e)}},c.a.createElement(ce.a,{height:C?200:120,imageFit:te.b.centerCover,imageSrc:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(e.did,"/").concat(e.cover,".jpg?imageMogr2/thumbnail/x250/interlace/0")})),c.a.createElement("div",{onClick:function(){s?t.setState({showModal:!0,currentCut:e,modalType:"cut"}):t.viewCut(e)}},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"start",tokens:{childrenGap:5}},c.a.createElement(ie.a,{variant:"xLarge",className:"title-limited",style:{fontSize:16,padding:3,width:"calc(100% - 35px)"},wrap:!0,block:!0},e.title),c.a.createElement(E.a,{style:{margin:5,height:18,width:35},horizontalAlign:"end",verticalAlign:"center",horizontal:!0,tokens:{childrenGap:5}},c.a.createElement(ae.a,{iconName:a?"Hide":"View"}),c.a.createElement("span",null,e.view_count))),""!==e.description&&c.a.createElement(ne.a,{styles:{root:{display:"flex",alignItems:"center",padding:3,height:18,lineHeight:16,fontSize:12}},title:e.description,showAsSecondaryTitle:!0})),e.tags.length>0&&c.a.createElement(E.a,{style:{margin:5},horizontalAlign:"center",horizontal:!0,tokens:{childrenGap:15},wrap:!0},e.tags.map((function(e,n){return e.visible?c.a.createElement("div",{onClick:function(){t.viewTag(e)}},c.a.createElement(P.a,{style:{fontSize:14},color:S[e.color]},e.name)):null})))))}))),!o&&c.a.createElement(re.a,{theme:we},"已经到底了")),c.a.createElement(K.a,{itemKey:"tag",headerText:"分类",itemIcon:"MyMoviesTV"},c.a.createElement(E.a,{horizontalAlign:"start",verticalAlign:"center",style:{margin:"5px",padding:"3px"}},c.a.createElement(Y.a,{messageBarType:$.a.warning,isMultiline:!1,dismissButtonAriaLabel:"Close",actions:c.a.createElement("div",null,c.a.createElement(oe.a,{onClick:function(){window.open("https://m.weibo.cn/message/chat?uid=3211500094")}},"报名"))},"如果您对分类工作感兴趣，可以联系",c.a.createElement(X.a,{href:"https://weibo.com/u/3211500094",target:"_blank",underline:!0},"管理员")),s&&c.a.createElement(se.a,{iconProps:{iconName:"Add"},style:{height:36},text:"新标签",onClick:function(){t.setState({showModal:!0,currentTag:{description:"",name:"新标签",visible:!0,color:"a"},isOldTag:!1,modalType:"tag"})}}),c.a.createElement(E.a,{horizontalAlign:"center",horizontal:!0,wrap:!0,style:{margin:"5px",padding:"3px"},tokens:{childrenGap:15}},d.map((function(e,n){return c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"center",style:{width:me(e.name)+(void 0!==e.visible&&!1===e.visible?15:0)},tokens:{childrenGap:3},onClick:function(){t.viewTag(e)}},void 0!==e.visible&&!1===e.visible&&c.a.createElement(E.a,{horizontalAlign:"center",verticalAlign:"center"},c.a.createElement(ae.a,{iconName:"Hide"})),c.a.createElement(P.a,{style:{fontSize:14},color:S[e.color]},e.name))}))))),c.a.createElement(K.a,{itemKey:"user",headerText:"我的",itemIcon:"People"},c.a.createElement(E.a,{horizontalAlign:"center",verticalAlign:"start",style:{margin:"5px",padding:"3px",background:"white",height:"calc(100vh - 47px)"}},null===l&&c.a.createElement(Y.a,{MessageBarType:$.a.info,isMultiline:!0},"受客户端限制，建议在浏览器中进行登录"),c.a.createElement(De,{state:"normal",util:a,dispatch:r,wide:!0}),null!==f&&f.length>0&&c.a.createElement(E.a,{horizontalAlign:"start",tokens:{childrenGap:5},style:{margin:"10px",minHeight:180}},c.a.createElement(ie.a,{variant:"xxLarge"},"浏览记录"),c.a.createElement("div",{style:{width:"95vw",height:175,display:"flex",flex:"none",overflowX:"auto",overflowY:"hidden"}},f.map((function(e,n){return c.a.createElement(Z.a,{style:{marginRight:3,marginLeft:3},styles:{root:{height:150,width:200}},onClick:function(){t.viewCut(e)}},c.a.createElement(ce.a,{height:120,imageFit:te.b.centerCover,imageSrc:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(e.did,"/").concat(e.cover,".jpg?imageMogr2/thumbnail/x250/interlace/0")}),c.a.createElement(ie.a,{className:"title-limited",style:{padding:3,height:30,textOverflow:"ellipsis"}},e.title))})))),null!==h&&null!==l&&h.length>0&&c.a.createElement(E.a,{horizontalAlign:"start",tokens:{childrenGap:5},style:{margin:"10px",minHeight:180}},c.a.createElement(ie.a,{variant:"xxLarge"},"收藏夹"),c.a.createElement("div",{style:{width:"95vw",height:175,display:"flex",flex:"none",overflowX:"auto",overflowY:"hidden"}},h.map((function(e,n){return c.a.createElement(Z.a,{style:{marginRight:3,marginLeft:3},styles:{root:{height:150,width:200}},onClick:function(){t.viewCut(e)}},c.a.createElement(ce.a,{height:120,imageFit:te.b.centerCover,imageSrc:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(e.did,"/").concat(e.cover,".jpg?imageMogr2/thumbnail/x250/interlace/0")}),c.a.createElement(ie.a,{className:"title-limited",style:{padding:3,height:24,textOverflow:"ellipsis"}},e.title))})))),c.a.createElement(E.a,{horizontalAlign:"start",tokens:{childrenGap:5},style:{margin:"10px",minHeight:150}},c.a.createElement(ie.a,{variant:"xxLarge"},"开心一刻"),c.a.createElement(E.a,{style:{height:50,width:"95vw",overflow:"hidden"},verticalAlign:"center",tokens:{childrenGap:"0 10"},wrap:!0},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:"10px"},tokens:{childrenGap:5},onClick:function(){window.location.href="https://ycycut.com/big_water_melon/index.html"}},c.a.createElement(le.a,{style:{width:50},src:"https://ycycut.com/images/game_logo.png"}),c.a.createElement(ie.a,{style:{width:200,fontWeight:"bold"},variant:"large"},"小游戏：合成小超越"))))))))}}]),n}(r.PureComponent))||ye,Fe=Object(w.connect)()(Be),He=n(828);n(235);function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var We,qe=Object(w.connect)((function(e){return{util:e.util}}))(Ie=function(e){h()(n,e);var t=Ne(n);function n(e){var a;return s()(this,n),a=t.call(this,e),b()(d()(a),"initData",(function(){(0,a.props.dispatch)({type:"util/getEpisodeList",payload:{}})})),b()(d()(a),"viewEpisode",function(){var e=D()(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.dispatch,c=n.history,r({type:"util/setCurrentEpisode",payload:t}),c.push("/cuts?id=".concat(t.id));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"hideDialog",(function(){a.setState({showModal:!1})})),b()(d()(a),"onSetDramaCover",D()(O.a.mark((function e(){var t,n,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentEpisode,n={id:t.did,cover:t.cover},e.prev=2,e.next=5,Object(k.C)(n);case 5:(r=e.sent).success?A.a.success("操作成功",2):A.a.fail(r.msg,2),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),A.a.fail(e.t0,2);case 12:a.setState({showModal:!1});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))),a.state={showModal:!1,currentEpisode:null},a}return u()(n,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.props.util,n=t.init,a=t.loading,r=t.episode_list,i=t.current_drama,o=t.is_admin,s=this.state,l=s.showModal,u=s.currentEpisode,p=fe(),d=[{text:"···",key:"home",href:"#/"}];return null!==i&&d.push({text:i.name,key:"drama",href:"#/episodes?id=".concat(i.id)}),c.a.createElement("div",{style:{background:"white"}},l&&c.a.createElement(L.a,{hidden:!l,onDismiss:function(){e.hideDialog()},dialogContentProps:{type:M.a.normal,title:"素材管理"}},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"end",tokens:{childrenGap:10},style:{margin:5}},c.a.createElement(q.a,{onClick:function(){e.onSetDramaCover()}},"设为封面")),c.a.createElement(G.a,{style:{width:"100%"},label:"标题",multiline:!0,autoAdjustHeight:!0,disabled:!0,defaultValue:u.name,onChange:function(t,n){u.name=n,e.setState({currentEpisode:u})}}),c.a.createElement(G.a,{style:{width:"100%"},label:"简介",multiline:!0,autoAdjustHeight:!0,disabled:!0,defaultValue:u.description,onChange:function(t,n){u.description=n,e.setState({currentEpisode:u})}}),c.a.createElement(W.a,null,c.a.createElement(I.a,{onClick:function(){e.hideDialog()},text:"确定"}))),(!n||a)&&c.a.createElement(E.a,{style:{margin:10},horizontal:!1,verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."})),c.a.createElement(He.a,{style:{margin:10},items:d}),null!==i&&""!==i.description&&c.a.createElement(re.a,{theme:we},i.description),0!==r.length&&c.a.createElement(E.a,{style:{marginTop:10},tokens:{childrenGap:5},horizontalAlign:"center",horizontal:!0,wrap:!0},r.map((function(t,n){return c.a.createElement(Z.a,{styles:{root:{minWidth:50,maxWidth:"98vw"}}},c.a.createElement("div",{className:p?"grid-item-four":"grid-item-two",style:{overflowX:"hidden"}},c.a.createElement("div",{onClick:function(){e.viewEpisode(t)}},c.a.createElement(ee.a,{previewImages:[{previewImageSrc:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(t.did,"/").concat(t.cover,".jpg?imageMogr2/thumbnail/x250/interlace/0"),imageFit:te.b.centerCover,height:p?200:120}]})),c.a.createElement("div",{onClick:function(){o&&e.setState({showModal:!0,currentEpisode:t})}},c.a.createElement(ne.a,{title:t.name,styles:{root:{display:"flex",alignItems:"center",padding:3,height:20,lineHeight:16,fontSize:16}}}))))}))))}}]),n}(r.PureComponent))||Ie,Ve=Object(w.connect)()(qe);function Ue(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw c}}}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var Xe,Qe=Object(w.connect)((function(e){return{util:e.util}}))(We=function(e){h()(n,e);var t=$e(n);function n(e){var a;return s()(this,n),a=t.call(this,e),b()(d()(a),"initData",(function(){"true"===function(){var e=localStorage.getItem("showMessageBarCutsPage");return null===e&&(e="true",localStorage.setItem("showMessageBarCutsPage",e)),!1}()&&a.setState({showMessageBarCutsPage:!0});var e=a.props,t=e.dispatch;0===e.util.tag_list.length&&t({type:"util/getTagList",payload:{}})})),b()(d()(a),"viewCut",function(){var e=D()(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=a.props,r=n.dispatch,c=n.history,r({type:"util/setCurrentCut",payload:t}),c.push("/detail?id=".concat(t.id));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"toggleIsCalloutVisible",(function(e){var t=a.state.visible;t[e]=!t[e],a.setState({visible:Ye({},t)})})),b()(d()(a),"hideDialog",(function(){a.setState({showModal:!1})})),b()(d()(a),"setCutInfor",D()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentCut,e.prev=1,e.next=4,Object(k.B)(t);case 4:(n=e.sent).success?A.a.success("修改成功",2):A.a.fail(n.msg,2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),A.a.fail(e.t0,2);case 11:a.setState({showModal:!1});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))),b()(d()(a),"addCollectRecord",function(){var e=D()(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.a)(t);case 3:(n=e.sent).success?A.a.success("收藏成功",2):A.a.fail(n.msg,2),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A.a.fail(e.t0,2);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"removeCollectRecord",function(){var e=D()(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.x)(t);case 3:(n=e.sent).success?A.a.success("已取消收藏",2):A.a.fail(n.msg,2),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A.a.fail(e.t0,2);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"onSetEpisodeCover",D()(O.a.mark((function e(){var t,n,r,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.util,n=t.current_episode,r=a.state.currentCut,c={id:n.id,cover:r.cover},e.prev=4,e.next=7,Object(k.E)(c);case 7:(i=e.sent).success?A.a.success("操作成功",2):A.a.fail(i.msg,2),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),A.a.fail(e.t0,2);case 14:a.setState({showModal:!1});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))),a.state={visible:{},showMessageBarCutsPage:!1,title:"",showModal:!1,currentCut:null},a}return u()(n,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.props.util,n=t.is_admin,a=(t.user,t.init),r=t.loading,i=t.tag_list,o=t.cut_list,s=t.current_drama,l=t.current_episode,u=this.state,p=u.visible,d=u.inited,f=u.showMessageBarCutsPage,h=u.showModal,m=u.currentCut,g=fe(),y=[{text:"···",key:"home",href:"#/"}];if(!d){if(0!==o.length){for(var v=0;v<o.length;v+=1)p[v]=!1;this.setState({visible:p,inited:!0})}return c.a.createElement("div",{style:{background:"white",height:"100vh"}},c.a.createElement(He.a,{style:{margin:10},items:y}),c.a.createElement(E.a,{style:{margin:20,background:"white"},horizontalAlign:"center"},(!a||r)&&c.a.createElement(E.a,{style:{margin:10},horizontal:!1,verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."}))),c.a.createElement(E.a,{horizontalAlign:"center"},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:5},style:{fontSize:30}},c.a.createElement(ae.a,{iconName:"Error"}),c.a.createElement(ie.a,null,"暂无结果"))))}null!==s&&y.push({text:s.name,key:"drama",href:"#/episodes?id=".concat(s.id)}),null!==l&&y.push({text:l.name,key:"episode",href:"#/cuts?id=".concat(l.id)});var x,b={},w=Ue(be);try{for(w.s();!(x=w.n()).done;){var k=x.value;b[k.id]=k.color}}catch(e){w.e(e)}finally{w.f()}var C=new Set;if(null!==m){var S,j=Ue(m.tags);try{for(j.s();!(S=j.n()).done;){var A=S.value;C.add(A.id)}}catch(e){j.e(e)}finally{j.f()}}return c.a.createElement("div",{style:{background:"white"}},m&&c.a.createElement(L.a,{hidden:!h,onDismiss:function(){e.hideDialog()},dialogContentProps:{type:M.a.normal,title:"素材管理"}},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"end",tokens:{childrenGap:10},style:{margin:5}},c.a.createElement(T.a,{label:"状态",defaultChecked:m.visible,onText:"可见",offText:"隐藏",onChange:function(t,n){m.visible=n,e.setState({currentCut:m})}}),null!==l&&c.a.createElement(q.a,{onClick:function(){e.onSetEpisodeCover()}},"设为封面")),c.a.createElement(G.a,{style:{width:"100%"},label:"标题",multiline:!0,autoAdjustHeight:!0,defaultValue:m.title,onChange:function(t,n){m.title=n,e.setState({currentCut:m})}}),c.a.createElement(G.a,{style:{width:"100%"},label:"简介",multiline:!0,autoAdjustHeight:!0,defaultValue:m.description,onChange:function(t,n){m.description=n,e.setState({currentCut:m})}}),c.a.createElement(E.a,{style:{margin:"3px"},horizontal:!0,horizontalAlign:"start",wrap:!0},i.map((function(t,n){return c.a.createElement(E.a,{style:{width:15+me(t.name),margin:2}},c.a.createElement(R.a,{style:{textAlign:"start"},label:t.name,defaultChecked:C.has(t.id),onChange:function(n,a){if(a)m.tags.push(t);else for(var r=m.tags,c=0;c<r.length;c+=1){if(r[c].id===t.id){r.splice(c,1);break}}e.setState({currentCut:m})}}))}))),c.a.createElement(W.a,null,c.a.createElement(q.a,{onClick:function(){e.setCutInfor()},text:"确定"}),c.a.createElement(I.a,{onClick:function(){e.hideDialog()},text:"取消"}))),c.a.createElement(He.a,{style:{margin:10},items:y}),(!a||r)&&c.a.createElement(E.a,{style:{margin:10},horizontal:!1,verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."})),0!==o.length&&c.a.createElement(E.a,{style:{marginTop:10},tokens:{childrenGap:10},horizontalAlign:"center",horizontal:!0,wrap:!0},f&&c.a.createElement(Y.a,{dismissButtonAriaLabel:"Close",MessageBarType:$.a.info,actions:c.a.createElement(oe.a,{style:{height:30},onClick:function(){var t;t="false",localStorage.setItem("showMessageBarCutsPage",t),e.setState({showMessageBarCutsPage:!1})}},"不再提醒"),isMultiline:!1},"点击说明文字以查看详细信息"),o.map((function(t,a){var r=void 0!==t.visible&&!1===t.visible;return c.a.createElement(Z.a,{styles:{root:{maxWidth:"98vw"}}},c.a.createElement("div",{className:g?"grid-item-four":"grid-item-one",style:{overflow:"hidden"}},c.a.createElement("div",{onClick:function(){e.viewCut(t)}},c.a.createElement(ce.a,{height:g?200:120,imageFit:te.b.centerCover,imageSrc:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(t.did,"/").concat(t.cover,".jpg?imageMogr2/thumbnail/x250/interlace/0")})),c.a.createElement("div",{onClick:function(){n?e.setState({showModal:!0,currentCut:t}):e.viewCut(t)}},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"start",tokens:{childrenGap:5}},c.a.createElement(ie.a,{variant:"xLarge",className:"title-limited",id:"callout-".concat(a),style:{fontSize:16,padding:3,width:"calc(100% - 35px)"},wrap:!0,block:!0},t.title),c.a.createElement(E.a,{style:{margin:5,height:18,width:35},horizontalAlign:"end",verticalAlign:"center",horizontal:!0,tokens:{childrenGap:5}},c.a.createElement(ae.a,{iconName:r?"Hide":"View"}),c.a.createElement("span",null,t.view_count))),""!==t.description&&c.a.createElement(ne.a,{styles:{root:{display:"flex",alignItems:"center",padding:3,height:18,lineHeight:16,fontSize:12}},title:t.description,showAsSecondaryTitle:!0})),t.tags.length>0&&c.a.createElement(E.a,{style:{margin:5},horizontalAlign:"center",horizontal:!0,tokens:{childrenGap:15},wrap:!0},t.tags.map((function(t,n){return t.visible?c.a.createElement("div",{onClick:function(){e.props.history.push("/cuts?tag=".concat(t.id))}},c.a.createElement(P.a,{style:{fontSize:14},color:b[t.color]},t.name)):null})))))}))),0===o.length&&c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",tokens:{childrenGap:5},style:{fontSize:30}},c.a.createElement(ae.a,{iconName:"Error"}),c.a.createElement(ie.a,null,"暂无结果")),!r&&c.a.createElement(re.a,{theme:we},"已经到底了"))}}]),n}(r.PureComponent))||We,Ze=Object(w.connect)()(Qe),et=n(322),tt=n.n(et),nt=n(324),at=n(323),rt=n.n(at);function ct(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return it(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return it(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw c}}}}function it(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ot(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function st(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ot(Object(n),!0).forEach((function(t){b()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ot(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var ut,pt=Object(w.connect)((function(e){return{util:e.util}}))(Xe=function(e){h()(n,e);var t=lt(n);function n(e){var a;return s()(this,n),a=t.call(this,e),b()(d()(a),"initData",(function(){if("true"===function(){var e=localStorage.getItem("showMessageBarPlayerPage");return null===e&&(e="true",localStorage.setItem("showMessageBarPlayerPage",e)),e}()){var e=(new Date).getHours();(e<1||e>18)&&a.setState({showMessageBarPlayerPage:!0})}(0,a.props.dispatch)({type:"util/getCutDetail",payload:{}})})),b()(d()(a),"addCollectRecord",function(){var e=D()(O.a.mark((function e(t){var n,r,c,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.a)(t);case 3:(n=e.sent).success?(A.a.success("收藏成功",2),r=a.props,c=r.util,i=r.dispatch,(o=c.current_cut).is_collected=!0,i({type:"util/setCurrentCut",payload:st({},o)})):A.a.fail(n.msg,2),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A.a.fail(e.t0,2);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"removeCollectRecord",function(){var e=D()(O.a.mark((function e(t){var n,r,c,i,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(k.x)(t);case 3:(n=e.sent).success?(A.a.success("已取消收藏",2),r=a.props,c=r.util,i=r.dispatch,(o=c.current_cut).is_collected=!1,i({type:"util/setCurrentCut",payload:st({},o)})):A.a.fail(n.msg,2),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),A.a.fail(e.t0,2);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()),b()(d()(a),"hideDialog",(function(){a.setState({showModal:!1})})),b()(d()(a),"onPreviewCover",(function(e,t){a.props.util.is_admin?a.setState({showModal:!0,currentCover:e,index:t}):a.onBrowseCovers(t)})),b()(d()(a),"onBrowseCovers",(function(e){var t=a.props.util.current_cut;rt.a.browsing({set:ge(t),defaultPage:e,controller:{close:!0,zoom:!0,download:!0,rotate:!0,flip:!0,pagination:!0},edge:20})})),b()(d()(a),"confirmDialog",D()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.state.currentCover,e.prev=1,e.next=4,Object(k.z)(t);case 4:(n=e.sent).success?A.a.success("操作成功",2):A.a.fail(n.msg,2),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),A.a.fail(e.t0,2);case 11:a.setState({showModal:!1});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})))),b()(d()(a),"onSetCutCover",D()(O.a.mark((function e(){var t,n,r,c,i;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.props.util,n=t.current_cut,r=a.state.currentCover,c={id:n.id,cover:r.id},e.prev=4,e.next=7,Object(k.A)(c);case 7:(i=e.sent).success?A.a.success("操作成功",2):A.a.fail(i.msg,2),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),A.a.fail(e.t0,2);case 14:a.setState({showModal:!1});case 15:case"end":return e.stop()}}),e,null,[[4,11]])})))),a.state={showModal:!1,currentCover:null,index:0,showMessageBarPlayerPage:!1},a}return u()(n,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e,t=this,n=this.props.util,a=n.init,r=n.loading,i=n.user,o=n.current_cut,s=n.current_drama,l=n.current_episode,u=this.state,p=u.showModal,d=u.currentCover,f=u.showMessageBarPlayerPage,h={},m=ct(be);try{for(m.s();!(e=m.n()).done;){var g=e.value;h[g.id]=g.color}}catch(e){m.e(e)}finally{m.f()}var y=[{text:"···",key:"home",href:"#/"}];if(null!=s&&y.push({text:s.name,key:"drama",href:"#/episodes?id=".concat(s.id)}),null!=l&&y.push({text:l.name,key:"episode",href:"#/cuts?id=".concat(l.id)}),null!=o){var v="";v=o.title.length>5?"".concat(o.title.slice(0,5),"···"):o.title,y.push({text:v,key:"cut",href:"#/detail?id=".concat(o.id)})}return null===o?c.a.createElement("div",{style:{background:"white",height:"100vh"}},c.a.createElement(He.a,{style:{margin:10},items:y}),c.a.createElement(E.a,{style:{margin:20,background:"white"},horizontalAlign:"center"},(!a||r)&&c.a.createElement(E.a,{style:{margin:10},horizontal:!1,verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."}))),c.a.createElement(E.a,{horizontalAlign:"center"},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:5},style:{fontSize:30}},c.a.createElement(ae.a,{iconName:"Error"}),c.a.createElement(ie.a,null,"暂无结果")))):c.a.createElement("div",{style:{background:"white"}},p&&c.a.createElement(L.a,{hidden:!p,onDismiss:function(){t.hideDialog()},dialogContentProps:{type:M.a.normal,title:"图片设置"}},c.a.createElement("div",null,c.a.createElement(E.a,{horizontal:!0,tokens:{childrenGap:10},style:{margin:5}},c.a.createElement(I.a,{onClick:function(){t.setState({showModal:!1});var e=t.state.index;t.onBrowseCovers(e)}},"预览截图"),c.a.createElement(q.a,{onClick:function(){t.onSetCutCover()}},"设为封面")),c.a.createElement(T.a,{label:"状态",defaultChecked:d.visible,onText:"可见",offText:"隐藏",onChange:function(e,n){d.visible=n,t.setState({currentCover:d})}}),c.a.createElement(le.a,{src:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(o.did,"/").concat(d.id,".jpg?imageMogr2/thumbnail/x250/interlace/0"),imageFit:te.b.centerCover,height:200})),c.a.createElement(W.a,null,c.a.createElement(q.a,{onClick:function(){t.confirmDialog()},text:"确定"}),c.a.createElement(I.a,{onClick:function(){t.hideDialog()},text:"取消"}))),c.a.createElement(He.a,{style:{margin:10},items:y}),(!a||r)&&c.a.createElement(E.a,{style:{margin:10},horizontal:!1,verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."})),f&&c.a.createElement(Y.a,{dismissButtonAriaLabel:"Close",MessageBarType:$.a.info,actions:c.a.createElement(oe.a,{style:{height:30},onClick:function(){var e;e="false",localStorage.setItem("showMessageBarPlayerPage",e),t.setState({showMessageBarPlayerPage:!1})}},"不再提醒"),isMultiline:!1},"晚间高峰期(20:00-24:00)请耐心等待加载"),null!==o&&"link"in o&&c.a.createElement(E.a,{style:{marginTop:20},horizontalAlign:"center"},c.a.createElement(E.a,{horizontalAlign:"start",tokens:{childrenGap:10},style:{width:"95vw",maxWidth:900}},c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"start",verticalAlign:"center"},c.a.createElement(ie.a,{variant:"xLargePlus",className:"title-limited-2",style:{width:"90vw"}},o.title,c.a.createElement("a",{id:"download",href:o.link_storage,download:o.link_storage}))),c.a.createElement(nt.a,{id:o.id,sources:{hd:{play_url:o.link_storage}},locale:"zh-Hans",cover:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(o.did,"/").concat(o.cover,".jpg?imageMogr2/thumbnail/x250/interlace/0")}),c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:5},style:{margin:5}},!o.is_collected&&null!==i&&c.a.createElement(q.a,{style:{width:100,height:35,fontSize:14},onClick:function(){t.addCollectRecord(o.id)}},"收藏素材"),o.is_collected&&null!==i&&c.a.createElement(q.a,{style:{width:100,height:35,fontSize:14},onClick:function(){t.removeCollectRecord(o.id)}},"取消收藏"),c.a.createElement(I.a,{style:{width:100,height:35,fontSize:14},onClick:function(){document.getElementById("download").click()}},"下载素材")),c.a.createElement(ie.a,{variant:"large",wrap:!0,style:{margin:5}},o.description),c.a.createElement(E.a,{horizontalAlign:"center",horizontal:!0,wrap:!0,style:{margin:"5px",padding:"3px"},tokens:{childrenGap:10}},o.tags.map((function(e,n){return c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"center",style:{width:me(e.name)+(void 0!==e.visible&&!1===e.visible?15:0)},tokens:{childrenGap:3},onClick:function(){t.props.history.push("/cuts?tag=".concat(e.id))}},void 0!==e.visible&&!1===e.visible&&c.a.createElement(E.a,{horizontalAlign:"center",verticalAlign:"center"},c.a.createElement(ae.a,{iconName:"Hide"})),c.a.createElement(P.a,{style:{fontSize:14},color:h[e.color]},e.name))}))),0!==o.covers.length&&c.a.createElement(E.a,{horizontalAlign:"start",tokens:{childrenGap:0},style:{margin:"5px"}},c.a.createElement(ie.a,{variant:"xLarge"},"素材预览"),c.a.createElement(E.a,{style:{height:180,width:"90vw",overflow:"auto",maxWidth:900},verticalAlign:"center",tokens:{childrenGap:"0 10"},wrap:!0},o.covers.map((function(e,n){var a={src:"https://7963-ycycut-images-5gn82kxt092528cd-1253268866.tcb.qcloud.la/cover/".concat(o.did,"/").concat(e.id,".jpg?imageMogr2/thumbnail/x250/interlace/0"),imageFit:te.b.centerCover};return c.a.createElement("div",{style:{width:200,boxShadow:"4px 4px 10px rgba(0, 0, 0, 0.2)"}},c.a.createElement(E.a,{verticalAlign:"center",tokens:{childrenGap:5}},void 0!==e.visible&&!1===e.visible&&c.a.createElement(E.a,{horizontalAlign:"center",verticalAlign:"center"},c.a.createElement(ae.a,{iconName:"Hide"})),void 0!==e.visible&&!0===e.visible&&c.a.createElement(E.a,{style:{height:16}}),c.a.createElement(le.a,tt()({},a,{height:125,width:200,onClick:function(){t.onPreviewCover(e,n)}})),void 0!==e.visible&&c.a.createElement(E.a,{style:{height:16}})))})))))))}}]),n}(r.PureComponent))||Xe,dt=Object(w.connect)()(pt),ft=(n(295),n(147)),ht=n.n(ft),mt=(n(296),n(148)),gt=n.n(mt);function yt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v()(e);if(t){var r=v()(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return g()(this,n)}}var vt=gt.a.alert,xt=Object(w.connect)((function(e){return{util:e.util}}))(ut=function(e){h()(n,e);var t=yt(n);function n(e){var a;return s()(this,n),a=t.call(this,e),b()(d()(a),"initData",(function(){document.title="合成小超越：排行榜";var e=a.props.dispatch;e({type:"util/getGameRank",payload:{mode:"desc"}}),e({type:"util/getGameRecords",payload:{}})})),b()(d()(a),"uploadScreenshot",function(){var e=D()(O.a.mark((function e(t,n){var a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=new FormData).append("file",n[0].file),e.next=4,Object(k.b)(t,a);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),a.state={tab:0},a}return u()(n,[{key:"componentDidMount",value:function(){this.initData()}},{key:"render",value:function(){var e=this,t=this.props,n=t.util,a=t.dispatch,r=n.init,i=n.loading,o=n.user,s=n.is_admin,l=n.game_records,u=n.game_rank,p=this.state.tab,d=[{title:c.a.createElement("p",null,"排行榜")},{title:c.a.createElement("p",null,"我的")}];return c.a.createElement(E.a,{horizontalAlign:"center"},c.a.createElement(E.a,{horizontalAlign:"center",verticalAlign:"start",style:{padding:"3px",background:"white",maxWidth:"400px",height:"100vh"}},c.a.createElement(ht.a,{tabs:d,page:p,swipeable:!1,useOnPan:!1,onTabClick:function(t,n){e.setState({tab:n})}},c.a.createElement("div",{style:{height:"calc(100vh - 50.5px)",overflow:"auto"}},c.a.createElement(E.a,{style:{width:"100%"},horizontalAlign:"center"},c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:"10px"},tokens:{childrenGap:5},onClick:function(){window.location.href="https://ycycut.com/big_water_melon/index.html"}},c.a.createElement(le.a,{style:{width:50},src:"https://ycycut.com/images/game_logo.png"}),c.a.createElement(ie.a,{style:{width:200,fontWeight:"bold"},variant:"large"},"小游戏：合成小超越")),c.a.createElement(Y.a,{dismissButtonAriaLabel:"Close",MessageBarType:$.a.info,isMultiline:!0},"未提交截图的成绩仅保留1天"),c.a.createElement(H.a,{defaultSelectedKey:"desc",styles:{flexContainer:{display:"flex"}},options:[{key:"desc",text:"高手榜  "},{key:"asc",text:"菜鸟榜"}],onChange:function(t,n){(0,e.props.dispatch)({type:"util/getGameRank",payload:{mode:n.key}})}}),(!r||i)&&c.a.createElement(E.a,{style:{margin:30},horizontal:!1,verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."})),u.map((function(e,t){return c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"space-around",verticalAlign:"center",style:{margin:"3px",padding:"3px",width:"95vw",maxWidth:"calc(400px * 0.95)",boxShadow:"4px 4px 10px rgba(0, 0, 0, 0.2)"},tokens:{childrenGap:5}},c.a.createElement(ie.a,{variant:"xLarge",style:{width:24,textAlign:"center"}},t+1),c.a.createElement(le.a,{width:75,height:75,imageFit:te.b.cover,src:e.avatar}),c.a.createElement(E.a,{tokens:{childrenGap:10}},c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"space-between",style:{width:150}},c.a.createElement(E.a,{verticalAlign:"center",tokens:{childrenGap:10}},c.a.createElement(ie.a,{variant:"medium"},e.name),c.a.createElement(E.a,{horizontal:!0,tokens:{childrenGap:10}},c.a.createElement(ie.a,{variant:"xLargePlus"},e.score),e.screenshot&&c.a.createElement(X.a,{onClick:function(){window.open("https://ycycut.com/big_water_melon/screenshots/".concat(e.id,"/").concat(e.screenshot))}},"图")),c.a.createElement(ie.a,{variant:"medium",style:{color:"#888"}},he(1e3*e.time))))),s&&c.a.createElement(E.a,{style:{margin:3},tokens:{childrenGap:5}},c.a.createElement(I.a,{onClick:function(){var t;vt("移除此条记录",c.a.createElement("div",null,"此操作将会删除这条记录，请谨慎操作"),[{text:"取消"},{text:"确定",onPress:(t=D()(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.F)(e.rid,"false");case 2:(n=t.sent).success?(A.a.success("移除记录成功",1.5),setTimeout((function(){a({type:"util/getGameRank",payload:{}})}),2e3)):A.a.success(n.msg,1.5);case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}])}},"移除"),c.a.createElement(q.a,{onClick:function(){var t;vt("屏蔽此用户",c.a.createElement("div",null,"此操作将会屏蔽此用户的全部数据，请谨慎操作"),[{text:"取消"},{text:"确定",onPress:(t=D()(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.H)(e.id,"block");case 2:(n=t.sent).success?(A.a.success("屏蔽用户成功",1.5),setTimeout((function(){a({type:"util/getGameRank",payload:{}})}),2e3)):A.a.fail(n.msg,1.5);case 4:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}])}},"屏蔽")))})))),c.a.createElement(E.a,{horizontalAlign:"center"},null===o&&c.a.createElement(Y.a,{MessageBarType:$.a.info,isMultiline:!0},"受客户端限制，建议在浏览器中进行登录"),c.a.createElement(De,{state:"game",util:n,dispatch:a}),0!==l.length&&o&&c.a.createElement(E.a,{horizontalAlign:"start",tokens:{childrenGap:5}},c.a.createElement(ie.a,{variant:"xxLarge"},"游戏记录"),c.a.createElement("div",{style:{height:"calc(100vh - 43.5px - 72px - 32px - 36px)",overflow:"auto"}},c.a.createElement(E.a,{horizontalAlign:"center"},l.map((function(t,n){return void 0===t.files_image&&(t.screenshot?t.files_image=[{url:"https://ycycut.com/big_water_melon/screenshots/".concat(o.id,"/").concat(t.screenshot)}]:t.files_image=[],t.can_upload=!1),c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"space-around",style:{margin:"3px",padding:"3px",width:"95vw",maxWidth:"calc(400px * 0.95 - 20px)",height:"111px",boxShadow:"4px 4px 10px rgba(0, 0, 0, 0.2)"}},c.a.createElement(E.a,{verticalAlign:"space-around"},c.a.createElement(ie.a,{variant:"xLarge"},t.score),t.can_upload&&c.a.createElement(q.a,{style:{width:100},onClick:D()(O.a.mark((function r(){return O.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.uploadScreenshot(t.rid,t.files_image);case 2:r.sent.success&&(A.a.success("上传成功"),l[n].can_upload=!1,a({type:"util/setGameRecords",payload:l}));case 4:case"end":return r.stop()}}),r)})))},"上传截图"),c.a.createElement(ie.a,{variant:"smallPlus"},he(1e3*t.time))),c.a.createElement(E.a,{style:{width:200}},c.a.createElement(_e.a,{files:t.files_image,length:2,onChange:function(e,t,r){if("add"===t){var c=e[e.length-1];c.file.size/1024/1024>=5.9?A.a.fail("图片大小不能超过6M"):(l[n].files_image=[c],l[n].can_upload=!0,a({type:"util/setGameRecords",payload:l}))}},accept:"image/jpeg,image/jpg,image/png",disableDelete:!0})))})))))))))}}]),n}(r.PureComponent))||ut,bt=Object(w.connect)()(xt),wt=(n(751),n(329)),Et=n.n(wt),kt=n(330),Ct=n.n(kt),St=n(838),jt=n(835),At=n(852),_t=n(149);function Ot(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return zt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,i=!0,o=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){o=!0,c=e},f:function(){try{i||null==n.return||n.return()}finally{if(o)throw c}}}}function zt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Dt=gt.a.alert;Object(_t.a)("https://cdn.jsdelivr.net/gh/js-deliver/ycycut@1.0.0/dist/icons/fonts/");var Pt=Object(w.connect)((function(e){return{util:e.util}}))((function(e){var t,n,a,i=e.dispatch,o=e.util,s=o.init,l=o.user,u=o.is_admin,p=Object(r.useState)(!1),d=ze()(p,2),f=d[0],h=d[1],m=Object(r.useState)(!1),g=ze()(m,2),y=g[0],v=g[1],x=Object(r.useState)(!1),b=ze()(x,2),w=b[0],C=b[1],S=Object(r.useState)(""),j=ze()(S,2),_=j[0],z=j[1],P=Object(r.useState)(null),T=ze()(P,2),G=T[0],R=T[1],B=Object(r.useState)("alipay"),F=ze()(B,2),H=F[0],N=F[1],U=Object(r.useState)([]),J=ze()(U,2),K=J[0],X=J[1],Q=Object(r.useState)([]),Z=ze()(Q,2),ee=Z[0],ne=Z[1],ae=Object(r.useState)(0),re=ze()(ae,2),ce=re[0],oe=re[1],se=Object(r.useState)(0),ue=ze()(se,2),pe=ue[0],de=ue[1],me=Object(r.useState)(null),ge=ze()(me,2),ye=ge[0],ve=ge[1],xe=Object(jt.a)("moneyInput"),be=Object(At.a)(!1),we=ze()(be,2),ke=we[0],Ce=we[1].toggle,Se=null!==(t=navigator.userAgent.toLowerCase().match(/micromessenger/i))&&"micromessenger"===t[0],je=fe(),Ae=(null===(n=localStorage.getItem("showTeachingBubbleOrdersPage"))&&(n="true",localStorage.setItem("showTeachingBubbleOrdersPage",n)),n),_e=Object(r.useState)("true"===Ae),Oe=ze()(_e,2),Pe=Oe[0],Le=Oe[1],Me=0,Te=Ot(ee);try{for(Te.s();!(a=Te.n()).done;){Me+=a.value.amount}}catch(e){Te.e(e)}finally{Te.f()}Me=Me.toFixed(2);var Ge,Re={ready:"待支付",closed:"已取消",done:"已支付"},Ie=[{title:c.a.createElement("p",null,"记录")},{title:c.a.createElement("p",null,"我的")}];new RegExp("\\biPhone\\b|\\biPod\\b","i").test(window.navigator.userAgent)&&(Ge={onTouchStart:function(e){return e.preventDefault()}});var Be=function(){var e=D()(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.next=3,Object(k.q)();case 3:return"data"in(t=e.sent)&&X(t.data),e.next=7,Object(k.w)();case 7:"data"in(t=e.sent)&&ne(t.data),h(!1);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){f||Be()}),[K,ee]),Object(r.useEffect)((function(){setTimeout((function(){var e=document.getElementById("qrcode");e&&R(e)}),100)}),[_,w]);var Fe=c.a.useMemo((function(){return{children:"不再提示",onClick:function(){var e;e="false",localStorage.setItem("showTeachingBubbleOrdersPage",e),Ce()}}}),[Ce]);return c.a.createElement(E.a,null,w&&c.a.createElement(L.a,{hidden:!w,onDismiss:function(){C(!1)},isModeless:!1,dialogContentProps:{type:M.a.normal,title:"扫码付款"}},c.a.createElement(E.a,{horizontalAlign:"center",style:{margin:"2px"},tokens:{childrenGap:15}},c.a.createElement(le.a,{src:G?G.toDataURL("image/png"):"",width:150,height:150,imageFit:te.b.contain}),c.a.createElement(Ct.a,{size:300,style:{visibility:"hidden",position:"fixed"},id:"qrcode",value:_,fgColor:"#000000"}),c.a.createElement(le.a,{src:"jsapi"===H?"http://ycycut.com/images/weixin.png":"http://ycycut.com/images/alipay.png",width:100,height:34,imageFit:te.b.contain}),!je&&"alipay"===H&&c.a.createElement("form",{action:"alipays://platformapi/startapp?appId=20000067&url=".concat(_),method:"post"},c.a.createElement(I.a,{type:"submit",style:{height:40}},"打开支付宝")),!je&&"jsapi"===H&&c.a.createElement(I.a,{onClick:function(){window.open(_)},style:{height:40}},"立即支付"))),y&&c.a.createElement(L.a,{hidden:!y,onDismiss:function(){v(!1)},isModeless:!1,dialogContentProps:{type:M.a.normal,title:"您确定要捐赠￥".concat(ce,"吗?")}},c.a.createElement("div",{className:Ee.body},c.a.createElement("p",null,"捐赠后您将不可退款")),c.a.createElement(W.a,null,c.a.createElement(q.a,{onClick:D()(O.a.mark((function e(){var t,n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(!1),h(!0),t={price:ce},!Se){e.next=9;break}return e.next=6,Object(k.v)(t);case 6:n=e.sent,e.next=12;break;case 9:return e.next=11,Object(k.u)(t);case 11:n=e.sent;case 12:return h(!1),n.success?(z(n.url),N(n.pay_type),C(!0)):A.a.fail(n.msg),e.next=16,Be();case 16:case"end":return e.stop()}}),e)}))),text:"确定"}),c.a.createElement(I.a,{onClick:function(){v(!1)},text:"取消"}))),c.a.createElement(ht.a,{tabs:Ie,page:pe,swipeable:!1,useOnPan:!1,onTabClick:function(e,t){de(t),Pe&&null!==l&&(Ce(),Le(!1))}},c.a.createElement("div",{style:{height:"calc(100vh - 50.5px)",overflow:"auto"}},c.a.createElement(Y.a,{dismissButtonAriaLabel:"Close",MessageBarType:$.a.success,isMultiline:!0},"共计".concat(ee.length,"位捐赠者")),(!s||f)&&c.a.createElement(E.a,{style:{margin:10},verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."})),c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"center",wrap:!0},ee.map((function(e,t){return c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"space-around",verticalAlign:"center",style:{margin:"10px",padding:"10px",width:"95vw",maxWidth:"calc(400px * 0.95)",boxShadow:"4px 4px 10px rgba(0, 0, 0, 0.2)"},tokens:{childrenGap:5}},c.a.createElement(le.a,{width:75,height:75,imageFit:te.b.cover,src:e.avatar}),c.a.createElement(E.a,{tokens:{childrenGap:10}},c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"space-between",style:{width:150}},c.a.createElement(E.a,{verticalAlign:"center",tokens:{childrenGap:10}},c.a.createElement(ie.a,{variant:"medium"},e.name),c.a.createElement(E.a,{horizontal:!0,tokens:{childrenGap:10}},c.a.createElement(ie.a,{variant:"xLargePlus"},"￥".concat(e.amount)))))),u&&c.a.createElement(E.a,{style:{margin:3},tokens:{childrenGap:5}},c.a.createElement(q.a,{onClick:function(){var t;Dt("屏蔽此用户",c.a.createElement("div",null,"此操作将会屏蔽此用户的全部数据，请谨慎操作"),[{text:"取消"},{text:"确定",onPress:(t=D()(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.H)(e.id,"block");case 2:if(!(n=t.sent).success){t.next=9;break}return A.a.success("屏蔽用户成功",1.5),t.next=7,Be();case 7:t.next=10;break;case 9:A.a.fail(n.msg,1.5);case 10:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)})}])}},"屏蔽")))})))),c.a.createElement("div",{style:{height:"calc(100vh - 50.5px)",overflow:"auto"}},(!s||f)&&c.a.createElement(E.a,{style:{margin:10},verticalAlign:"center"},c.a.createElement(V.a,{label:"正在加载..."})),c.a.createElement(E.a,{horizontalAlign:"center",style:{height:"calc(100vh - 50.5px)",overflow:"auto"}},null===l&&c.a.createElement(Y.a,{MessageBarType:$.a.info,isMultiline:!0},"受客户端限制，建议在浏览器中进行登录"),c.a.createElement(De,{state:"normal",util:o,dispatch:i,wide:!0}),null===l&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",style:{margin:"2px"},tokens:{childrenGap:2}},c.a.createElement(ie.a,{variant:"xLarge"},"登录后可进行捐赠")),c.a.createElement(E.a,{horizontalAlign:"center",verticalAlign:"center",style:{marginTop:10,width:"95vw"},tokens:{childrenGap:10}},0===K.length&&null!==l&&c.a.createElement(Y.a,{messageBarType:$.a.info},"暂无订单"),K.length>0&&c.a.createElement(Y.a,{messageBarType:$.a.info},"共计".concat(K.length,"笔订单")),ke&&c.a.createElement(St.a,{hasSmallHeadline:!0,isWide:!0,hasCloseButton:!0,illustrationImage:{src:"http://ycycut.com/images/2in1.png",width:700},target:"#".concat(xe),onDismiss:Ce,headline:"在此处输入金额可进行捐赠",primaryButtonProps:Fe},"使用微信支付请在微信中打开"),null!==l&&c.a.createElement(E.a,{horizontal:!0,verticalAlign:"center",tokens:{childrenGap:10}},c.a.createElement("div",{id:xe}),c.a.createElement(E.a,{style:{width:200,margin:10},onClick:function(){return ye.focus()}},c.a.createElement(Et.a,{ref:function(e){return ve(e)},type:"money",placeholder:"金额不超过100",clear:!1,autoAdjustHeight:!0,onVirtualKeyboardConfirm:function(e){var t=parseFloat(e);oe(t)},extra:"¥",moneyKeyboardAlign:"left",moneyKeyboardWrapProps:Ge})),0!==ce&&c.a.createElement(q.a,{style:{width:80},disabled:f,onClick:function(){ce>.01&&ce<=100?v(!0):A.a.fail("不合法的金额",1.5)}},"下单")),c.a.createElement(E.a,{style:{padding:5,height:"calc(100vh - 224.5px)"},verticalAlign:"start",horizontalAlign:"center"},c.a.createElement("div",{style:{height:"auto",overflowY:"auto",overflowX:"hidden"}},c.a.createElement(E.a,{horizontal:!0,wrap:!0,horizontalAlign:"space-around",verticalAlign:"center",tokens:{childrenGap:10}},K.map((function(e,t){return c.a.createElement("div",{style:{margin:"10px",padding:"10px",width:"95vw",maxWidth:"calc(400px * 0.95)",boxShadow:"4px 4px 10px rgba(0, 0, 0, 0.2)"}},c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"start",verticalAlign:"center"},c.a.createElement(E.a,{verticalAlign:"center",horizontalAlign:"center",tokens:{childrenGap:5},style:{width:"70vw",margin:20}},c.a.createElement(E.a,{horizontal:!0,horizontalAlign:"center",verticalAlign:"center",tokens:{childrenGap:10}},c.a.createElement(ie.a,{variant:"xLargePlus"},"￥".concat(e.pay_price)),c.a.createElement(ie.a,{variant:"medium"},Re[e.status])),c.a.createElement(ie.a,{variant:"medium",style:{color:"#888"}},he(1e3*e.update_time))),c.a.createElement(E.a,{verticalAlign:"center",tokens:{childrenGap:10},style:{margin:10,width:100}},"ready"===e.status&&c.a.createElement(q.a,{onClick:D()(O.a.mark((function t(){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(k.d)(e);case 2:return(n=t.sent).success?A.a.info("订单已取消",1.5):A.a.fail(n.msg,1.5),t.next=6,Be();case 6:case"end":return t.stop()}}),t)})))},"取消"),"ready"===e.status&&c.a.createElement(I.a,{onClick:D()(O.a.mark((function t(){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:z(e.pay_url),N(e.pay_type),C(!0);case 3:case"end":return t.stop()}}),t)})))},"支付"))))}))))))))))}));t.default=function(e){var t=e.history;return c.a.createElement(i.Router,{history:t},c.a.createElement(i.Switch,null,c.a.createElement(i.Route,{path:"/",exact:!0,component:Fe}),c.a.createElement(i.Route,{path:"/episodes",component:Ve}),c.a.createElement(i.Route,{path:"/cuts",component:Ze}),c.a.createElement(i.Route,{path:"/detail",component:dt}),c.a.createElement(i.Route,{path:"/admin",component:S}),c.a.createElement(i.Route,{path:"/game_rank",component:bt}),c.a.createElement(i.Route,{path:"/orders",component:Pt}),c.a.createElement(i.Route,{path:"*",component:Fe})))}}},[[399,1,2]]]);